<link rel="stylesheet" href="css/custom-styles.css">
<div class="container">
    <div class="inner">
        <div class="side-nav">
            <ul>
                <li>
                    <h5><a href="#getting-started">Getting Started</a></h5>
                </li>
                <li>
                    <small><a href="#setting-up-plugin">Setting Up The Plugin</a></small>
                </li>
                <li>
                    <small><a href="#adding-website">Adding A Basic Website</a></small>
                </li>
                <li>
                    <small><a href="#connecting-iridium">Connecting With Iridium</a></small>
                </li>
            </ul>
        </div>
        <div class="main-content" id="top">
            <div class="contents">
                <h2>Hi there!</h2>
                <p>We are so excited to see you've decided to check out the plugin
                    API. </p>
                <p>With plugins, you can connect Iridium to any cloud services, integrate with countless apps and
                    customize your workflow almost endlessly. Sounds exciting? ðŸ¤© Making a plugin is super simple and
                    here
                    you will
                    have all
                    you need to get started ðŸŽ‰</p>
                <blockquote class="info"> To enable plugin functionality, you will need to have a registered Iridium
                    Cloud account
                    and log in to Iridium Cloud.</blockquote>
                <div class="title-container">
                    <h2 id="getting-started">Getting Started </h2>
                    <small class="go-to-top-button"><a href="#top"><i class="fas fa-arrow-up"></i></a></small>
                </div>
                <p>In a nutshell, an Iridium plugin is a Node.js program running on it's own separate process. You know
                    what
                    that
                    means ðŸ¤“, you can almost do anything! </p>
                <p>To help you get started, here's a complete step-by-step guide to build a plugin. We are going to
                    build a
                    cool web
                    dashboard that shows the progress of a task list.</p>
                <blockquote> This guide assumes you have <a href="https://nodejs.org/en/">Node.js</a> 10 installed. If
                    you
                    haven't,
                    head over to Node.js website and download Node.js 10.</blockquote>
                <div class="title-container">
                    <h4 id="setting-up-plugin">Setting Up The Plugin </h4>
                    <small class="go-to-top-button"><a href="#top"><i class="fas fa-arrow-up"></i></a></small>
                </div>
                <p>Let's start by setting up our plugin, create a file named <code>package.json</code> with the
                    following contents and save it under a dedicated directory, say, <code>iridium-dashboard</code>
                </p>
                <pre><code>{
    "name": "idirium-dashboard",
    "version": "0.0.1",
    "description": "my first iridium plugin",
    "dependencies": {}
}</code></pre>
                <p>This will enable allow us to use <code>npm</code> to install some packages we need, for details
                    regarding <code>package.json</code>, see <a href="https://docs.npmjs.com/files/package.json">npm's
                        documentation</a>. Let's also add in the required <b>Iridium Plugin Manifest</b> as well, create
                    another file in the same
                    directory named <code>iridium.json</code>, we will go through it in detail later.</p>
                <blockquote class="important">Every plugin must have a valid<code>iridium.json</code> for it to be
                    recognized by Iridium
                </blockquote>
                <p>Let's put the following content into <code>iridium.json</code></p>
                <pre><code>{
    "id": "----REPLACE WITH YOUR OWN ID----",
    "name": "Cool Dashboard",
    "description": "A cool dashboard",
    "author": "Michael Lu",
    "image": "icon.png",
    "main": "index.js",
}</code></pre>
                <p>Then, we need to generate a unique ID for our plugin. You can use any <a
                        href="https://www.uuidgenerator.net/">online UUID generator</a> to generate one. After you
                    generate one, paste the ID you generated into <code>----RPLEACE WITH YOUR OWN ID----</code> and
                    save the file.</p>
                <p>So what is in <code>iridium.json</code>? It is the
                    basic config data that identifies your Node.js program to Iridium as a plugin. This way you can keep
                    your <code>package.json</code> separate, <code>package.json</code> file is not required for Iridium
                    to run. All fields are required. Several important things
                    to note for the manifest:</p>
                <ul>
                    <li><b>id</b> must be unuqie throughout all plugins in Iridium. Any UUID generator should give you
                        an unique UUID in the <b>world</b>. <blockquote>If plugins with duplicated IDs are found,
                            Iridium
                            will
                            refuse to load all of them and log them in <code>log.txt</code> file.</blockquote>
                    </li>
                    <li><b>main</b> must speficies a proper javascript file. In this case, it's the file
                        <code>index.js</code> under the top level directory of your plugin. Feel free to change it to
                        match your own folder structure.</li>
                    <li><b>image</b> must speficies a valid icon for your plugin, this will be displayed in Iridium's
                        plugin page.</li>
                </ul>
                <p>For the icon, you can download any image and save it in
                    <code>iridium-dashboard</code> folder as <code>icon.png</code>. For best results, use a high
                    definition square png file.</p>
                <p>Let's also add in an empty <code>index.js</code> file in <code>iridium-dashboard</code> for later.
                </p>
                <p>After you complete the steps, your plugin folder should look like this:</p>
                <pre><code>iridium-dashboard
|--index.js
|--iridium.json
|--package.json
|--icon.png</code></pre>
                <blockquote class="info">If you want to skip the web interface and jump to the plugin part, see <a
                        href="#connecting-iridium">Connecting With Iridium</a></blockquote>

                <div class="title-container">
                    <h4 id="adding-website">Adding A Basic Website </h4>
                    <small class="go-to-top-button"><a href="#top"><i class="fas fa-arrow-up"></i></a></small>
                </div>
                <p>Now let's add a basic web server and website to display our dashboard. First, add <a
                        href="https://expressjs.com/">express</a> as a dependency with the following command:</p>
                <p><code>npm install --save express</code></p>
                <p>After express is installed, add the following code in <code>index.js</code></p>
                <pre><code>const express = require('express');
const app = require('express')();
const http = require('http').Server(app);

app.use(express.static('public'))

http.listen(3000);</code></pre>
                <p>
                    <blockquote>This script will serve all files under <code>public</code> folder. You should make any
                        necessary adjustments to properly secure your files when running in production environment.
                    </blockquote>
                </p>
                <p>Then create folder <code>public</code> and create file <code>index.html</code> under it. Fill in the
                    following</p>
                <pre><code>&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;title&gt;Iridium Dashboard&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;Hello Iridium&lt;/h1&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
                <p>Now open any terminal, change directory to <code>iridium-dashboard</code>. You should be able to run
                    <code>node index.js</code>. Then you should be able to open your browser, navigate to
                    <code>http://localhost:3000</code> and see the following:</p>
                <img class="screenshot" src="/img/sc01.png">
                <p>After you scessfully loaded the page, let's add in couple more things. First, create
                    <code>public/style.css</code> with the following contents: </p>
                <pre><code>body {
    background: #353535;
    color: #EFEFEF;
    font: 13px Helvetica, Arial;
}
.text-primary {
    color: #4287ff;
}
.container {
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.large-text {
    font-size: 80pt;
}</code></pre>
                <p>Then, modify <code>public/index.html</code> to contain the following: </p>
                <pre><code>&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;title&gt;Iridium Dashboard&lt;/title&gt;
    &lt;link rel="stylesheet" href="/style.css"&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;div&gt;
            &lt;h1&gt;Dashboard&lt;/h1&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;h3 class="text-primary" id="list-title"&gt;-&lt;/h3&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;h1 class="large-text" id="completed-tasks"&gt;0&lt;/h1&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
                <p>Then restart your server by re-running <code>node index.js</code>, refresh your browser, you should
                    see this:</p>
                <img class="screenshot" src="/img/sc02.png">
                <p>At this moment, your plugin folder should look like this:</p>
                <pre><code>iridium-dashboard
|--public
|  |--index.html
|  |--style.css
|--index.js
|--iridium.json
|--package.json
|--icon.png</code></pre>
                <div class="title-container">
                    <h4 id="connecting-iridium">Connecting With Iridium </h4>
                    <small class="go-to-top-button"><a href="#top"><i class="fas fa-arrow-up"></i></a></small>
                </div>
                <p>We are finally at the exciting part. So far the project is just
                    like any simple Node.js website, but we will now supercharge this website by connecting it with
                    Iridium.</p>
                <p>Let's start by going over how to connect your Node.js program with Iridium. Your main
                    file (previously specified in <code>iridium.json</code> and in this case is the
                    <code>index.js</code>) will need to become a module that fulfills
                    <code><a href="/?api#IPlugin">IPlugin</a></code> interface by providing a pre-defined export
                    <code>Initialize(iridium)</code>. When Iridium is ready to
                    load your plugin, it will call this function and provide your plugin with Iridium's capabilities in
                    <code>iridium</code> parameter.</p>
                <p>This way, you can perform your own initialization before your plugin is loaded if needed.</p>
                <blockquote class="important">If your main module does not export <code>Initialize</code> method, an
                    error will be logged in <code>log.txt</code> and your plugin will appear in error state in the
                    Plugins page
                </blockquote>
                <blockquote class="info">For details about on the <code>iridium</code> parameter and its full
                    capabilities, see <a href="/?api#IridiumApp"><code>IridiumApp</code></a></blockquote>
                <p>To do that, let's first modify <code>index.js</code> to the following:</p>
                <pre><code>const express = require('express');
const app = require('express')();
const http = require('http').Server(app);

app.use(express.static('public'))

http.listen(3000);

// --- The above will run first ---

module.exports.Initialize = (iridium) => {
    // --- Iridium will call this function here and pass in the app context --- 
}</code></pre>
                <p>And that's it! Your Node.js program is an Iridium plugin ðŸ˜Ž, simple enough right? </p>
                <p>Let's try it out, exit Iridium if it's open and the Node.js server if it's still running, then copy
                    the whole directory into
                    <code>Your Home Directory/Iridium/plugins</code> as a directory.</p>
                <p>Afterwards, your <code>Iridium</code> directory should look like the following</p>
                <pre><code>Iridium
|--plugins
|  |--iridium-dashboard
|  |  |--public
|  |  |  |--index.html
|  |  |  |--style.css
|  |  |--index.js
|  |  |--iridium.json
|  |  |--package.json
|  |  |--icon.png
|--data.json
|--settings.json
|--...</code></pre>
                <p>Then, start Iridium app, click <code>Plugins</code> on the left navigation panel, you should see this</p>
                <img class="screenshot" src="/img/sc03.png">
            </div>
        </div>
    </div>
</div>